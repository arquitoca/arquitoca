<html>
<form id="folha" style="font-family:calibri">
<style>
#fundo {
background-color:#ddd;
color:black
}
</style>
<table cellpadding="5">
<tfoot valign="top">
<tr><td>
<span style="font-family:calibri;font-size:13.5px; color:#7F8E9F">
Desenhado pela equipe ModeLAB: Profs. Júlio, Laline, Olavo :: Direitos autorais reservados
</span>
<br><canvas id="Canvas" width="500" height="250" style="border:1px solid"></canvas>

<br><br><input type="button" value="REGENERA" onclick="regenera();desenha()">
<input type="button" value="REINICIA" onclick="reinicia()">
<a href="https://docs.google.com/forms/d/1CChiFzqZh6EvEq8wVMoUiEf_NAB3TV3N-ThXAYQwjLM/viewform?edit_requested=true" target="_blank"><input type="button" value="FORMULÁRIO"></a>

<canvas id="Canvas1" width="220" height="12" style="border:0px solid"></canvas>
<br><br>
<div style="font-family:calibri;font-size:18px; color:black">
<strong>INSTRUÇÕES</strong>
</div>
<hr>
<div style="font-family:calibri;font-size:15px; color:black">
1- Escolha uma combinação clicando quantas vezes quiser em um dos botões
<br>ALEATORIO 1 (contrastes livres) ou ALEATORIO 2 (cores com tonalidades
<br>similares) e/ou deslizando os sliders na caixa 1-COR e/ou 1-CONTRASTE.
<hr>2- Dê uma NOTA de 0 a 10 para a combinação de cores na caixa 2- NOTA.
<hr>3- Clique uma vez no botão GRAVA PADRÃO na caixa 3- TREINAMENTO.
<br>*Aparecerá a confirmação da gravacão.
<hr>4- Repita os passos (do 1 ao 3) por 3 vezes.
<hr>5- Deslize os sliders na caixa 4- NOVA COR e veja resultado em tempo real.
<hr>6- Na caixa 5- ESCOLHA DO MÉTODO alterne e visualize diferentes resultados.
</div>
</td><td>
<br>
<input type="button" value="ALEATORIO 1" onclick="GeraCorAleatoria();desenha()">
<input type="button" value="ALEATORIO 2" onclick="GeraCorAleatoria1();desenha()">
<br><br><div style="border:1px solid; padding: 3px" >
<div id="fundo">  1- COR  </div>
<hr>
<input type="range" size="2" name="vermelhoRange" id="vermelhoRange" min="0" max="255" value="00" oninput="this.form.vermelhoInput.value=this.value; desenha()" />R
<input type="text" size="2" name="vermelhoInput" id="vermelhoInput" min="0" max="255" value="00" oninput="this.form.vermelhoRange.value=this.value; desenha()" />vermelho
<br><input type="range" size="2" name="verdeRange" id="verdeRange" min="0" max="255" value="00" oninput="this.form.verdeInput.value=this.value; desenha()" />G
<input type="text" size="2" name="verdeInput" id="verdeInput" min="0" max="255" value="00" oninput="this.form.verdeRange.value=this.value; desenha()" />verde
<br><input type="range" size="2" name="azulRange" id="azulRange" min="0" max="255" value="00" oninput="this.form.azulInput.value=this.value; desenha()" />B
<input type="text" size="2" name="azulInput" id="azulInput" min="0" max="255" value="00" oninput="this.form.azulRange.value=this.value; desenha()" />azul
</div>
<br>
<div style="border:1px solid; padding: 3px">
<div id="fundo">3- TREINAMENTO</div><div id="aviso" style="background-color:green; color:white"></div>
<hr><input type="button" value="GRAVA PADRÃO" onclick="gravaPadrao(); addArray(); Aviso(); Aviso1()">
<div id="Result" style="font-size:10px"></div>
<div id="ResultP1" style="font-size:10px"></div>  
<img id="b" src="b.png" width="1" height="1">
<img id="a" src="a.png" width="1" height="1">
<img id="c" src="c.png" width="1" height="1">

<span style="font-family:calibri;font-size:10px">
Md Dif R:<input type="text" size="2" style="border:0px; font-family:calibri;font-size:10px" name="DifVermelho" id="DifVermelho">
<div id="ResultRL" style="font-size:10px"></div>
<div id="ResultRLContr" style="font-size:10px"></div> 
bFORM_R:<input type="text" size="2" style="border:0px; font-family:calibri;font-size:10px" name="bFORMULA_R" id="bFORMULA_R">
aFORM_R:<input type="text" size="2" style="border:0px; font-family:calibri;font-size:10px" name="aFORMULA_R" id="aFORMULA_R">

<div id="Result1" style="font-size:10px"></div>
<div id="ResultP2" style="font-size:10px"></div>   
Md Dif G:<input type="text" size="2" style="border:0px; font-family:calibri;font-size:10px" name="DifVerde" id="DifVerde">
<div id="ResultRL1" style="font-size:10px"></div>
<div id="ResultRLContr1" style="font-size:10px"></div> 
bFORM_G:<input type="text" size="2" style="border:0px;font-family:calibri;font-size:10px" name="bFORMULA_G" id="bFORMULA_G">
aFORM_G:<input type="text" size="2" style="border:0px;font-family:calibri;font-size:10px" name="aFORMULA_G" id="aFORMULA_G">

<div id="Result2" style="font-size:10px"></div>
<div id="ResultP3" style="font-size:10px"></div>   
Md Dif B:<input type="text" size="2" style="border:0px;font-family:calibri;font-size:10px" name="DifAzul" id="DifAzul">
<div id="ResultRL2" style="font-size:10px"></div>
<div id="ResultRLContr2" style="font-size:10px"></div>
bFORM_B:<input type="text" size="2" style="border:0px;font-family:calibri;font-size:10px" name="bFORMULA_B" id="bFORMULA_B">
aFORM_B:<input type="text" size="2" style="border:0px;font-family:calibri;font-size:10px" name="aFORMULA_B" id="aFORMULA_B">
</span>
</div>

</td><td>
<br><br><br><div style="border:1px solid; padding: 3px">
<div id="fundo">1- CONTRASTE</div>
<hr><input type="range" size="2" name="vermelhoRangeA" id="vermelhoRangeA" min="0" max="255" value="00" oninput="this.form.vermelhoInputA.value=this.value; desenha()" />R
<input type="text" size="2" name="vermelhoInputA" id="vermelhoInputA" min="0" max="255" value="00" oninput="this.form.vermelhoRangeA.value=this.value; desenha()" />vermelho
<br><input type="range" size="2" name="verdeRangeA" id="verdeRangeA" min="0" max="255" value="00" oninput="this.form.verdeInputA.value=this.value; desenha()" />G
<input type="text" size="2" name="verdeInputA" id="verdeInputA" min="0" max="255" value="00" oninput="this.form.verdeRangeA.value=this.value; desenha()" />verde
<br><input type="range" size="2" name="azulRangeA" id="azulRangeA" min="0" max="255" value="00" oninput="this.form.azulInputA.value=this.value; desenha()" />B
<input type="text" size="2" name="azulInputA" id="azulInputA" min="0" max="255" value="00" oninput="this.form.azulRangeA.value=this.value; desenha()" />azul
</div>
<br>
<div id="MudaEstilo" style="border:1px solid red; padding: 3px">
<div id="fundo">4- NOVA COR</div>
<hr><input type="range" size="2" name="NovovermelhoRange" min="0" max="255" value="100" oninput="this.form.NovovermelhoInput.value=this.value; NovaCor(); mostraArray()" />R
<input type="text" size="2" name="NovovermelhoInput" min="0" max="255" value="100" oninput="this.form.NovovermelhoRange.value=this.value; NovaCor(); mostraArray()" />vermelho
<br><input type="range" size="2" name="NovoverdeRange" min="0" max="255" value="100" oninput="this.form.NovoverdeInput.value=this.value; NovaCor(); mostraArray()" />G
<input type="text" size="2" name="NovoverdeInput" min="0" max="255" value="100" oninput="this.form.NovoverdeRange.value=this.value; NovaCor(); mostraArray()" />verde
<br><input type="range" size="2" name="NovoazulRange" min="0" max="255" value="100" oninput="this.form.NovoazulInput.value=this.value; NovaCor(); mostraArray()" />B
<input type="text" size="2" name="NovoazulInput" min="0" max="255" value="100" oninput="this.form.NovoazulRange.value=this.value; NovaCor(); mostraArray()" />azul
</div>

</td><td>
<br><br><br><div style="border:1px solid; padding: 3px;">
<div id="fundo">2- NOTA (DE 0 A 10)</div>
<hr><br><input type="text" size="2" name="Nota" value="5" id="Nota" min="0" max="10">
<br><br><br>
</div>
<br>
<div style="border:1px solid; padding: 3px">
<div id="fundo">5- ESCOLHA DO METODO</div>
<hr><input type="radio" name="RLMetodo" checked id="RLMetodo" onclick="NovaCor()"> METODO 1
<br><input type="radio" name="RLMetodo" id="NaoRLMetodo" onclick="NovaCor()"> METODO 2

<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" name="escolha" checked id="ContrEscuro" onclick="NovaCor()"> Contr. escuro
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="radio" name="escolha" id="ContrClaro" onclick="NovaCor()"> Contr. claro
</div>

</td></tr>
</table>

<script>
window.onload = function() {
document.getElementById("folha");
var canvas = document.getElementById("Canvas");
var ctx = canvas.getContext("2d");
ctx.font = "70px calibri";
ctx.fillStyle = "rgb(152,145,111)";
ctx.fillText ('COR', 50, 100);
ctx.font = "50px calibri";
ctx.fillStyle = "rgb(100,100,137)";
ctx.fillText ('&', 175, 100);
ctx.fillStyle = "rgb(118,111,84)";
ctx.fillText ('CONTRASTE', 215, 100);
ctx.font = "40px calibri";
ctx.fillText ('Leia as instruções abaixo', 55, 160);
}
function reinicia() {
location.reload();
}

function regenera() {
document.getElementById("folha");
var canvas = document.getElementById("Canvas");
var ctx = canvas.getContext("2d");
folha.vermelhoInput.value = 255;
folha.vermelhoRange.value = 255;
folha.verdeInput.value = 255;
folha.verdeRange.value = 255;
folha.azulInput.value = 255;
folha.azulRange.value = 255;
folha.vermelhoInputA.value = 255;
folha.vermelhoRangeA.value = 255;
folha.verdeInputA.value = 255;
folha.verdeRangeA.value = 255;
folha.azulInputA.value = 255;
folha.azulRangeA.value = 255;
}


function GeraCorAleatoria(){
document.getElementById("folha");
var canvas = document.getElementById("Canvas");
var ctx = canvas.getContext("2d");

var vermelhoCOR = Math.random()*255;
folha.vermelhoInput.value = vermelhoCOR.toFixed(0);
folha.vermelhoRange.value = vermelhoCOR.toFixed(0);

var verdeCOR = Math.random()*255;
folha.verdeInput.value = verdeCOR.toFixed(0);
folha.verdeRange.value = verdeCOR.toFixed(0);

var azulCOR = Math.random()*255;
folha.azulInput.value = azulCOR.toFixed(0);
folha.azulRange.value = azulCOR.toFixed(0);


var vermelhoCONTR = Math.random()*255;
folha.vermelhoInputA.value = vermelhoCONTR.toFixed(0);
folha.vermelhoRangeA.value = vermelhoCONTR.toFixed(0);

var vedeCONTR = Math.random()*255;
folha.verdeInputA.value = vedeCONTR.toFixed(0);
folha.verdeRangeA.value = vedeCONTR.toFixed(0);

var azulCONTR = Math.random()*255;
folha.azulInputA.value = azulCONTR.toFixed(0);
folha.azulRangeA.value = azulCONTR.toFixed(0);
}

function GeraCorAleatoria1(){
document.getElementById("folha");
var canvas = document.getElementById("Canvas");
var ctx = canvas.getContext("2d");

var vermelhoCOR = Math.random()*255;
folha.vermelhoInput.value = vermelhoCOR.toFixed(0);
folha.vermelhoRange.value = vermelhoCOR.toFixed(0);

var verdeCOR = Math.random()*255;
folha.verdeInput.value = verdeCOR.toFixed(0);
folha.verdeRange.value = verdeCOR.toFixed(0);

var azulCOR = Math.random()*255;
folha.azulInput.value = azulCOR.toFixed(0);
folha.azulRange.value = azulCOR.toFixed(0);


var vermelhoCONTR = (1*vermelhoCOR) - (1*Math.random()*100);
folha.vermelhoInputA.value = vermelhoCONTR.toFixed(0);
folha.vermelhoRangeA.value = vermelhoCONTR.toFixed(0);

var vedeCONTR = (1*verdeCOR) - (1*Math.random()*100);
folha.verdeInputA.value = vedeCONTR.toFixed(0);
folha.verdeRangeA.value = vedeCONTR.toFixed(0);

var azulCONTR = (1*azulCOR) - (1*Math.random()*100);
folha.azulInputA.value = azulCONTR.toFixed(0);
folha.azulRangeA.value = azulCONTR.toFixed(0);
}

function desenha() {
document.getElementById("folha");
var canvas = document.getElementById("Canvas");
var canvas1 = document.getElementById("Canvas1");
var ctx = canvas.getContext("2d");
var ctx1 = canvas1.getContext("2d");

var vermelhoCOR = folha.vermelhoInput.value;
var verdeCOR = folha.verdeInput.value;
var azulCOR = folha.azulInput.value;

var vermelhoCONTR = folha.vermelhoInputA.value;
var verdeCONTR = folha.verdeInputA.value;
var azulCONTR = folha.azulInputA.value;
var Nota = folha.Nota.value;

//-------------------------------------------------------------------------
//DESENHO DA COR
ctx1.beginPath();
ctx1.fillStyle = "rgb(" + vermelhoCOR + "," + verdeCOR + "," + azulCOR + ")";
ctx1.fillRect(0,0,canvas1.width,canvas.height);	

//DESENHO DO CONTRASTE
ctx1.beginPath();
ctx1.fillStyle = "rgb(" + vermelhoCONTR + "," + verdeCONTR + "," + azulCONTR + ")";
ctx1.fillRect(0,0,(canvas1.width)/2,canvas1.height);	

//texto 
ctx.font = "25px calibri";
ctx.fillStyle = "white";
//ctx.fillText ('cor', 460, 30);
//ctx.fillText ('contraste', 400, 400);
//-------------------------------------------------------------------------

var img = document.getElementById("b");
ctx.drawImage(img,0,0, 500, 250);

ctx.beginPath();
ctx.moveTo(7,7);
ctx.lineTo(33,7);
ctx.lineTo(103,46);
ctx.lineTo(103,206);
ctx.lineTo(7,245);
ctx.lineTo(7,7);
ctx.fillStyle = "rgb(" + vermelhoCOR + "," + verdeCOR + "," + azulCOR + ")";
ctx.fill();

ctx.fillStyle = "rgb(" + vermelhoCONTR + "," + verdeCONTR + "," + azulCONTR + ")";
ctx.fillRect(103,70,330,131);

var img2 = document.getElementById("c");
ctx.drawImage(img2,0,0, 500, 250);

var img1 = document.getElementById("a");
ctx.drawImage(img1,0,0, 500, 250);
}

function gravaPadrao() {
document.getElementById("folha");
var canvas = document.getElementById("Canvas");
var ctx = canvas.getContext("2d");

//COR
var vermelhoCOR = folha.vermelhoInput.value;
var verdeCOR = folha.verdeInput.value;
var azulCOR = folha.azulInput.value;

//CONTRASTE
var vermelhoCONTR = folha.vermelhoInputA.value;
var verdeCONTR = folha.verdeInputA.value;
var azulCONTR = folha.azulInputA.value;

var DifVermelho = (folha.vermelhoInputA.value) / (folha.vermelhoInput.value);
folha.DifVermelho.value = DifVermelho.toFixed(2);

var DifVerde = (folha.verdeInputA.value) / (folha.verdeInput.value);
folha.DifVerde.value = DifVerde.toFixed(2);

var DifAzul = (folha.azulInputA.value) / (folha.azulInput.value);
folha.DifAzul.value = DifAzul.toFixed(2);

}
//-----------------------------------------------------
//AVISO QUE GRAVOU O PADRÃO
function Aviso() {
document.getElementById("folha");
setTimeout(function(){ document.getElementById("aviso").innerHTML = "padrão gravado"; }, 100);
}
function Aviso1() {
document.getElementById("folha");
setTimeout(function(){ document.getElementById("aviso").innerHTML = ""; }, 1200);
}

//----------------------------------------------------
var x = 0;
var x1 = 0;
var x2 = 0;
var x3 = 0;
var x4 = 0;
var x5 = 0;
var x6 = 0;
var x7 = 0;
var x8 = 0;
var x9 = 0;
var array = Array();
var array1 = Array();
var array2 = Array();
var arrayP = Array();
var array4 = Array();
var array5 = Array();
var array6 = Array();
var array7 = Array();
var array8 = Array();
var array9 = Array();

function addArray() {
 var Nota = folha.Nota.value;
 array[x] = document.getElementById("DifVermelho").value * Nota;
 array1[x1] = document.getElementById("DifVerde").value * Nota;
 array2[x2] = document.getElementById("DifAzul").value * Nota;
 arrayP[x3] = document.getElementById("Nota").value;
 array4[x4] = document.getElementById("vermelhoInput").value;
 array5[x5] = document.getElementById("verdeInput").value;
 array6[x6] = document.getElementById("azulInput").value;
 array7[x7] = document.getElementById("vermelhoInputA").value;
 array8[x8] = document.getElementById("verdeInputA").value;
 array9[x9] = document.getElementById("azulInputA").value;
 //alert("Element: " + array[x] + " Added at index " + x);
 x++;
 x1++;
 x2++;
 x3++;
 x4++;
 x5++;
 x6++;
 x7++;
 x8++;
 x9++;
}

function mostraArray() {
   var Nota = folha.Nota.value;
   //ARRAY DO VERMELHO
   var e = "<hr/>";
   for (var y=0; y<array.length; y++)
   {
     var Arra1 = array[y];
	 e += "Dif R " + y + " = " + Arra1.toFixed(2) + ", ";
   }
   var f = "";
   for (var p=0; p<arrayP.length; p++)
   {
   f += "Pes R " + p + " = " + arrayP[p] + ", ";
   var MostraP = arrayP[p];
   var SomaPesos = (1*arrayP[0] + 1*arrayP[1] + 1*arrayP[2]);
   }
   var g = "";
   for (var ya=0; ya<array4.length; ya++)
   {
     var ArraRL = array4[ya];
	 g += "R-RLcor " + ya + " = " + ArraRL + ", ";
   }
   var h = "";
   for (var yb=0; yb<array7.length; yb++)
   {
     var ArraRLContr = array7[yb];
	 h += "R-RLcontr " + yb + " = " + ArraRLContr + ", ";
   }
   
   document.getElementById("Result").innerHTML = e;
   document.getElementById("ResultP1").innerHTML = f;
   document.getElementById("ResultRL").innerHTML = g;
   document.getElementById("ResultRLContr").innerHTML = h;
   var Soma = (1*array[0] + 1*array[1] + 1*array[2]);
   var Media = Soma/SomaPesos;
   folha.DifVermelho.value =  Media.toFixed(2);
   
   //ARRAY DO VERDE
   var e1 = "<hr/>";
   for (var y1=0; y1<array1.length; y1++)
   {
     var Arra2 = array1[y1];
	 e1 += "Dif G " + y1 + " = " + Arra2.toFixed(2) + ", ";
   }
   var f1 = "";
   for (var p=0; p<arrayP.length; p++)
   {
   f1 += "Pes G " + p + " = " + arrayP[p] + ", ";
   var MostraP = arrayP[p];
   var SomaPesos = (1*arrayP[0] + 1*arrayP[1] + 1*arrayP[2]);
   }
   var g1 = "";
   for (var ya1=0; ya1<array5.length; ya1++)
   {
     var ArraRL1 = array5[ya1];
	 g1 += "G-RLcor " + ya1 + " = " + ArraRL1 + ", ";
   }
   var h1 = "";
   for (var yb1=0; yb1<array8.length; yb1++)
   {
     var ArraRLContr1 = array8[yb1];
	 h1 += "G-RLcontr " + yb1 + " = " + ArraRLContr1 + ", ";
   }
   document.getElementById("Result1").innerHTML = e1;
   document.getElementById("ResultP2").innerHTML = f1;
   document.getElementById("ResultRL1").innerHTML = g1;
   document.getElementById("ResultRLContr1").innerHTML = h1;
   var Soma1 = (1*array1[0] + 1*array1[1] + 1*array1[2]);
   var Media1 = Soma1/SomaPesos;
   folha.DifVerde.value =  Media1.toFixed(2);
   
   //ARRAY DO AZUL
   var e2 = "<hr/>";
   for (var y2=0; y2<array2.length; y2++)
   {
     var Arra3 = array2[y2];
	 e2 += "Dif B " + y2 + " = " + Arra3.toFixed(2) + ", ";
   }
   var f2 = "";
   for (var p=0; p<arrayP.length; p++)
   {
   f2 += "Pes B " + p + " = " + arrayP[p] + ", ";
   var MostraP = arrayP[p];
   var SomaPesos = (1*arrayP[0] + 1*arrayP[1] + 1*arrayP[2]);
   }
   var g2 = "";
   for (var ya2=0; ya2<array6.length; ya2++)
   {
     var ArraRL2 = array6[ya2];
	 g2 += "B-RLcor " + ya2 + " = " + ArraRL2 + ", ";
   }
   var h2 = "";
   for (var yb2=0; yb2<array9.length; yb2++)
   {
     var ArraRLContr2 = array9[yb2];
	 h2 += "B-RLcontr " + yb2 + " = " + ArraRLContr2 + ", ";
   }
   document.getElementById("Result2").innerHTML = e2;
   document.getElementById("ResultP3").innerHTML = f2;
   document.getElementById("ResultRL2").innerHTML = g2;
   document.getElementById("ResultRLContr2").innerHTML = h2;
   var Soma2 = (1*array2[0] + 1*array2[1] + 1*array2[2]);
   var Media2 = Soma2/SomaPesos;
   folha.DifAzul.value =  Media2.toFixed(2);
   
   document.getElementById("MudaEstilo").style.border = "3px solid green";

//VARIAVEIS PARA CALCULAR NO METODO RL
//FAZER OS arraya 
//      X COR						Y CONTRASTE						XY									X²

var R1_RL_X = array4[0];	var R1_RL_Y = array7[0];	var R1_RL_XY = R1_RL_X * R1_RL_Y;	var X2_R1 = Math.pow(array4[0], 2);
var G1_RL_X = array5[0];	var G1_RL_Y = array8[0];	var G1_RL_XY = G1_RL_X * G1_RL_Y;	var X2_G1 = Math.pow(array5[0], 2);
var B1_RL_X = array6[0];	var B1_RL_Y = array9[0];	var B1_RL_XY = B1_RL_X * B1_RL_Y;	var X2_B1 = Math.pow(array6[0], 2);

var R2_RL_X = array4[1];	var R2_RL_Y = array7[1];	var R2_RL_XY = R2_RL_X * R2_RL_Y;	var X2_R2 = Math.pow(array4[1], 2);
var G2_RL_X = array5[1];	var G2_RL_Y = array8[1];	var G2_RL_XY = G2_RL_X * G2_RL_Y;	var X2_G2 = Math.pow(array5[1], 2);
var B2_RL_X = array6[1];	var B2_RL_Y = array9[1];	var B2_RL_XY = B2_RL_X * B2_RL_Y;	var X2_B2 = Math.pow(array6[1], 2);

var R3_RL_X = array4[2];	var R3_RL_Y = array7[2];	var R3_RL_XY = R3_RL_X * R3_RL_Y;	var X2_R3 = Math.pow(array4[2], 2);
var G3_RL_X = array5[2];	var G3_RL_Y = array8[2];	var G3_RL_XY = G3_RL_X * G3_RL_Y;	var X2_G3 = Math.pow(array5[2], 2);
var B3_RL_X = array6[2];	var B3_RL_Y = array9[2];	var B3_RL_XY = B3_RL_X * B3_RL_Y;	var X2_B3 = Math.pow(array6[2], 2);

var SomaR_X = (1*R1_RL_X + 1*R2_RL_X + 1*R3_RL_X);
var SomaG_X = (1*G1_RL_X + 1*G2_RL_X + 1*G3_RL_X);
var SomaB_X = (1*B1_RL_X + 1*B2_RL_X + 1*B3_RL_X);

var SomaR_Y = (1*R1_RL_Y + 1*R2_RL_Y + 1*R3_RL_Y);
var SomaG_Y = (1*G1_RL_Y + 1*G2_RL_Y + 1*G3_RL_Y);
var SomaB_Y = (1*B1_RL_Y + 1*B2_RL_Y + 1*B3_RL_Y);

var SomaR_XY = (1*R1_RL_XY + 1*R2_RL_XY + 1*R3_RL_XY);
var SomaG_XY = (1*G1_RL_XY + 1*G2_RL_XY + 1*G3_RL_XY);
var SomaB_XY = (1*B1_RL_XY + 1*B2_RL_XY + 1*B3_RL_XY);

var SomaR_X2 = (1*X2_R1 + 1*X2_R2 + 1*X2_R3);
var SomaG_X2 = (1*X2_G1 + 1*X2_G2 + 1*X2_G3);
var SomaB_X2 = (1*X2_B1 + 1*X2_B2 + 1*X2_B3);

//COR
var vermelhoCOR = folha.vermelhoInput.value;
var verdeCOR = folha.verdeInput.value;
var azulCOR = folha.azulInput.value;

// FORMULA b: b = (XY-((X*Y)/n))/(X²)-((Math.pow(X, 2))/n);
// FORMULA a: a = (SomaY/3) - (b * (SomaX/3));
// FORMULA Ymedia = a + (b * X); X é a cor. Ymedia é o novo contraste.

//VERMELHO
var bFORMULA_R = (1*SomaR_XY-((SomaR_X*SomaR_Y)/3))/(1*SomaR_X2-((Math.pow(SomaR_X, 2))/3));
var aFORMULA_R = (SomaR_Y/3) - (bFORMULA_R * (SomaR_X/3));
folha.bFORMULA_R.value = bFORMULA_R;
folha.aFORMULA_R.value = aFORMULA_R;

var Ymedia = 1*aFORMULA_R + (bFORMULA_R * vermelhoCOR);

//VERDE
var bFORMULA_G = (SomaG_XY-((SomaG_X*SomaG_Y)/3))/(1*SomaG_X2-((Math.pow(SomaG_X, 2))/3));
var aFORMULA_G = (SomaG_Y/3) - (bFORMULA_G * (SomaG_X/3));
folha.bFORMULA_G.value = bFORMULA_G;
folha.aFORMULA_G.value = aFORMULA_G;

var Ymedia1 = 1*aFORMULA_G + (bFORMULA_G * verdeCOR);

//AZUL
var bFORMULA_B = (SomaB_XY-((SomaB_X*SomaB_Y)/3))/(1*SomaB_X2-((Math.pow(SomaB_X, 2))/3));
var aFORMULA_B = (SomaB_Y/3) - (bFORMULA_B * (SomaB_X/3));
folha.bFORMULA_B.value = bFORMULA_B;
folha.aFORMULA_B.value = aFORMULA_B;

var Ymedia2 = 1*aFORMULA_B + (bFORMULA_B * azulCOR);

}
 
//==============================================================================================

function NovaCor() {
document.getElementById("folha");
var canvas = document.getElementById("Canvas");
var canvas1 = document.getElementById("Canvas1");
var ctx = canvas.getContext("2d");
var ctx1 = canvas1.getContext("2d");

var NovovermelhoCOR = folha.NovovermelhoInput.value;
var NovoverdeCOR = folha.NovoverdeInput.value;
var NovoazulCOR = folha.NovoazulInput.value;

var RLMetodo = document.getElementById("RLMetodo").checked;
	if (RLMetodo == true){
		var NovovermelhoCONTR = 1*(folha.aFORMULA_R.value) + ((folha.bFORMULA_R.value) * NovovermelhoCOR);
		var NovoverdeCONTR = 1*(folha.aFORMULA_G.value) + ((folha.bFORMULA_G.value) * NovoverdeCOR);
		var NovoazulCONTR = 1*(folha.aFORMULA_B.value) + ((folha.bFORMULA_B.value) * NovoazulCOR);
	} else {

var ContrEscuro = document.getElementById("ContrEscuro").checked;
	if (ContrEscuro == true){
		var NovovermelhoCONTR = folha.DifVermelho.value * NovovermelhoCOR;
		var NovoverdeCONTR = folha.DifVerde.value * NovoverdeCOR;
		var NovoazulCONTR = folha.DifAzul.value * NovoazulCOR;
	} else {
		var NovovermelhoCONTR = NovovermelhoCOR / folha.DifVermelho.value;
		var NovoverdeCONTR = NovoverdeCOR / folha.DifVerde.value;
		var NovoazulCONTR = NovoazulCOR / folha.DifAzul.value;
	}
	}

//-----------------------------------------------------------------------	
//DESENHO DA COR
ctx1.beginPath();
ctx1.fillStyle = "rgb(" + NovovermelhoCOR + "," + NovoverdeCOR + "," + NovoazulCOR + ")";
ctx1.fillRect(0,0,canvas1.width,canvas1.height);	

//DESENHO DO CONTRASTE
ctx1.beginPath();
ctx1.fillStyle = "rgb(" + NovovermelhoCONTR + "," + NovoverdeCONTR + "," + NovoazulCONTR + ")";
ctx1.fillRect(0,0,(canvas1.width)/2,canvas1.height);

//-----------------------------------------------------------------------


var img = document.getElementById("b");
ctx.drawImage(img,0,0, 500, 250);

ctx.beginPath();
ctx.moveTo(7,7);
ctx.lineTo(33,7);
ctx.lineTo(103,46);
ctx.lineTo(103,206);
ctx.lineTo(7,245);
ctx.lineTo(7,7);
ctx.fillStyle = "rgb(" + NovovermelhoCOR + "," + NovoverdeCOR + "," + NovoazulCOR + ")";
ctx.fill();

ctx.fillStyle = "rgb(" + NovovermelhoCONTR + "," + NovoverdeCONTR + "," + NovoazulCONTR + ")";
ctx.fillRect(103,70,330,131);

var img2 = document.getElementById("c");
ctx.drawImage(img2,0,0, 500, 250);

var img1 = document.getElementById("a");
ctx.drawImage(img1,0,0, 500, 250);

//texto informando RGB no contraste novo
ctx.font = "15px calibri";
ctx.fillStyle = "black";
//ctx.fillText ('R: ' + NovovermelhoCONTR, canvas.width - 60, canvas.height - 50);
//ctx.fillText ('G: ' + NovoverdeCONTR, canvas.width - 60, canvas.height - 30);
//ctx.fillText ('B: ' + NovoazulCONTR, canvas.width - 60, canvas.height - 10);

ctx.font = "25px calibri";
ctx.fillStyle = "gray";
//ctx.fillText ('cor', 460, 30);
//ctx.fillText ('contraste', 400, 400);
}
</script>
</form>
</html>
